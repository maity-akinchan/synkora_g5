# Video Meeting Feature - Setup Guide

## Overview
Synkora now includes live video meeting functionality powered by ZegoCloud. Team members can start instant video calls directly from any project.

## Features

### Video Meeting Capabilities
- ✅ HD video and audio calls
- ✅ Screen sharing
- ✅ Text chat during calls
- ✅ Up to 50 participants
- ✅ Camera and microphone toggle
- ✅ User list view
- ✅ Multiple layout options
- ✅ Audio/video settings
- ✅ Project-specific meeting rooms
- ✅ Team member only access

### User Experience
- **Start Meeting**: Click "Start Meeting" button in project sidebar
- **Join Meeting**: Other team members see the same button and join the same room
- **Leave Meeting**: Click leave button or close the modal
- **Controls**: Toggle camera, microphone, share screen, chat

## Setup Instructions

### 1. Get ZegoCloud Credentials

1. Go to [ZegoCloud Console](https://console.zegocloud.com/)
2. Sign up or log in
3. Create a new project
4. Get your **App ID** and **Server Secret**

### 2. Configure Environment Variables

Add these to your `.env` file:

```env
NEXT_PUBLIC_ZEGO_APP_ID="YOUR_APP_ID_HERE"
NEXT_PUBLIC_ZEGO_SERVER_SECRET="YOUR_SERVER_SECRET_HERE"
```

Replace `YOUR_APP_ID_HERE` and `YOUR_SERVER_SECRET_HERE` with your actual credentials from ZegoCloud.

### 3. Restart the Development Server

```bash
npm run dev
```

### 4. Test the Feature

1. Open any project
2. Look for the "Start Meeting" button in the sidebar
3. Click it to start a meeting
4. Other team members can join by clicking the same button

## Components Created

### 1. VideoMeetingModal
**File**: `components/meeting/video-meeting-modal.tsx`

A modal dialog that contains the video meeting interface.

**Features**:
- Full-screen modal (95vw x 95vh)
- Dark theme support
- Project name in header
- Clean, modern design

### 2. VideoMeeting
**File**: `components/meeting/video-meeting.tsx`

The core video meeting component using ZegoCloud SDK.

**Features**:
- Automatic room creation based on project ID
- User authentication with session data
- Configurable meeting settings
- Automatic cleanup on leave

### 3. Updated ProjectSidebar
**File**: `components/project/project-sidebar.tsx`

Added "Start Meeting" button to the project sidebar.

**Location**: Top of the sidebar, above team members list

## How It Works

### Room Management
- Each project has a unique meeting room: `project-{projectId}`
- All team members join the same room
- Room persists as long as someone is in it
- Automatically closes when everyone leaves

### Security
- Only authenticated users can join
- User identity verified through NextAuth session
- Project-specific rooms (can't join other project meetings)
- Team members only (enforced by project access)

### User Identity
- Display name: User's name or email
- User ID: Unique user ID from database
- Avatar: Automatically generated by ZegoCloud

## Meeting Controls

### Video Controls
- **Camera Toggle**: Turn camera on/off
- **Microphone Toggle**: Mute/unmute
- **Screen Share**: Share your screen
- **Layout**: Switch between grid, sidebar, etc.
- **Settings**: Adjust audio/video quality

### Communication
- **Video**: HD video streaming
- **Audio**: Clear audio with noise cancellation
- **Chat**: Text chat sidebar
- **Reactions**: Emoji reactions (if enabled)

### Participant Management
- **User List**: See all participants
- **Participant Count**: Shows in UI
- **Join/Leave Notifications**: See when people join/leave

## Configuration Options

### Meeting Settings (in video-meeting.tsx)

```typescript
{
    turnOnMicrophoneWhenJoining: false,  // Start muted
    turnOnCameraWhenJoining: false,      // Start with camera off
    showMyCameraToggleButton: true,       // Show camera button
    showMyMicrophoneToggleButton: true,   // Show mic button
    showAudioVideoSettingsButton: true,   // Show settings
    showScreenSharingButton: true,        // Enable screen share
    showTextChat: true,                   // Enable chat
    showUserList: true,                   // Show participants
    maxUsers: 50,                         // Max participants
    layout: "Auto",                       // Auto layout
    showLayoutButton: true,               // Allow layout change
}
```

### Customization Options

You can customize:
- Max participants (default: 50)
- Default camera/mic state
- Available features (chat, screen share, etc.)
- Layout options
- UI theme
- Language

## Troubleshooting

### Meeting Won't Start
- Check if ZegoCloud credentials are set in `.env`
- Verify credentials are correct
- Check browser console for errors
- Ensure you're logged in

### Can't See Other Participants
- Make sure they're in the same project
- Check if they clicked "Start Meeting"
- Verify network connection
- Check browser permissions

### No Video/Audio
- Grant browser permissions for camera/microphone
- Check device settings
- Try toggling camera/mic buttons
- Check audio/video settings in meeting

### Poor Quality
- Check internet connection
- Reduce number of participants
- Turn off camera to save bandwidth
- Close other bandwidth-heavy applications

## Browser Compatibility

### Supported Browsers
- ✅ Chrome 74+
- ✅ Firefox 66+
- ✅ Safari 12+
- ✅ Edge 79+

### Required Permissions
- Camera access
- Microphone access
- Screen sharing (for screen share feature)

## Performance

### Bandwidth Requirements
- **Audio only**: ~50 Kbps
- **Video (720p)**: ~1.5 Mbps
- **Screen sharing**: ~2 Mbps
- **Recommended**: 5+ Mbps for best experience

### System Requirements
- Modern browser (see compatibility)
- Webcam (for video)
- Microphone (for audio)
- Speakers or headphones

## Security & Privacy

### Data Protection
- End-to-end encryption for video/audio
- Secure WebRTC connections
- No recording by default
- Data processed by ZegoCloud

### Access Control
- Only authenticated users
- Project team members only
- Unique room per project
- Session-based authentication

## Cost Considerations

### ZegoCloud Pricing
- **Free Tier**: 10,000 minutes/month
- **Pay-as-you-go**: After free tier
- **Enterprise**: Custom pricing

Check [ZegoCloud Pricing](https://www.zegocloud.com/pricing) for details.

## Future Enhancements

Potential improvements:
1. Meeting scheduling
2. Recording functionality
3. Meeting history/logs
4. Waiting room
5. Host controls (mute all, etc.)
6. Breakout rooms
7. Virtual backgrounds
8. Meeting analytics
9. Calendar integration
10. Meeting notifications

## Support

### Documentation
- [ZegoCloud Docs](https://docs.zegocloud.com/)
- [UIKit Prebuilt Docs](https://docs.zegocloud.com/article/14748)

### Common Issues
- **Credentials not working**: Regenerate in ZegoCloud console
- **Meeting not loading**: Check browser console
- **Connection issues**: Check firewall/network settings
- **Quality issues**: Reduce video quality in settings

## Notes

- Meeting rooms are created on-demand
- No persistent meeting data stored
- Meetings end when last person leaves
- Each project has its own meeting room
- Multiple meetings can run simultaneously across different projects
